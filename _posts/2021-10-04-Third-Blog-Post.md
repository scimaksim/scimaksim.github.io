---
layout: post
title: Project reflection - working with data from NASA
---

# NASA Exoplanet Archive - Project Vignette

Wow, what a week. After spending the last two weekends (and every weekday evening) working with R Markdown, I am finally prepared to submit my [exoplanet vignette](https://scimaksim.github.io/nasa-api-vignette/). 

The R code in this project queries the NASA Exoplanet Archive database and programmatically retrieves a [myriad of data](https://exoplanetarchive.ipac.caltech.edu/docs/API_PS_columns.html#addtldefault) on known exoplanets. According to the API user guide, "the archive is gradually transitioning its data tables to the new VO-compliant Table Access Protocol (TAP) service". Consequently, the primary function in th
=e vignette (`annualExoDiscoveries()`) appends queries to the TAP base service URL (https://exoplanetarchive.ipac.caltech.edu/TAP/sync?query=).

After making basic API calls in assignment four, querying the NASA Exoplanet Archive was a matter of reusing R's `httr` and `jsonlite` packages, grabbing raw content using the `GET()` function, and converting it to a data frame using the functions `rawToChar()` and `fromJSON()`. Then came the difficult part - figuring out what to do with the roughly 4,500 rows of data. 

When I was studying astrophysics as an undergraduate, data on exoplanets had still been relatively sparse. Naturally, my first question was to find out how far the field had progressed. I constructed a bar plot listing the number of exoplanet observations since 1989 (the earliest year in the table) and - wow! - I had graduated during one of the two most prolific years for exoplanet discovery (2014). Moreover, there were far more methods to make these discoveries than the three I could recall (the direct method of imaging and the indirect methods of radial velocity and transit detections).

Next, I became curious to find out how many of the ~4,500 exoplanets could potentially harbor life. I researched conditions for habitability in scholarly articles and came upon the virtual Planetary Habitability Laboratory (PHL) and its [Habitable Exoplanets Catalog](http://phl.upr.edu/projects/habitable-exoplanets-catalog). The [methods](http://phl.upr.edu/projects/habitable-exoplanets-catalog/methods) by which these listings were curated inspired me to write a function that would output a similar catalog (albeit as an R data frame). After reading additional papers on the subject, I opted to calculate habitability zones and incident flux using formulae provided by [Kopparapu et al.](https://iopscience.iop.org/article/10.1088/2041-8205/787/2/L29). Methods to perform the calculation are apparent in the `calculateHZ()` function and an extension of these calculations to data frames is made possible by the function `hzFluxCalculator()`. The culmination of this research resulted in the `habitableExoFinder()` function, which outputs a data frame of potentially habitable exoplanets that closely matches the one maintained by PHL.

Having worked with planet masses, radii, and effective temperatures in the previous step, I was ready to summarize all three using the plotting functions of `ggplot2`. I created a mass-radius scatter plot to visualize the distribution of Earth-like and giant planets in the Exoplanet archive. The plot made it apparent that radii tend to increase with mass, but only up to the size of Jupiter. Several articles (cited in the vignette) explained that inward forces at this threshold began to compress metallic and rocky cores and inhibited further radial growth. Plotting the mass and the semi-major axes of planets (and grouping those planets by their discovery method) led to the revelation that direct imaging tends to favor planets which are far from their host star, whereas indirect detections via transit observations heavily favor planets in close proximity to their star. A boxplot and a contingency table with mean and median calculations further affirmed this bias, and the e-book [_Methods of Detecting Exoplanets_](https://www.springer.com/gp/book/9783319274560) explained the physics of "why".

All in all, the work of pulling in data and creating basic visualizations for it in R was relatively simple. Enhancing those visualizations with various color palettes and LaTeX labels, as well as creating logarithmic scales to accommodate massive or distant outliers, was more time-consuming and required internet look-ups. The most difficult aspect was interpreting data in meaningful ways, which necessitated hours of scholarly research. The eighth floor of D. H. Hill Jr. Library has an impressive stack of texts outlining exoplanet research, but most are a decade old. Corroborrating some of the early conclusions in those texts with new data was incredibly rewarding.
 

